https://docs.microsoft.com/en-us/skype-sdk/sdn/articles/installing-the-trusted-root-certificate
Installing a trusted root certificate is necessary only if you are notified that the certificate of authority is not trusted on any machine. This can occur when you use a private or custom certificate server instead of acquiring certificates from an established public certificate of authority.

Manage our own CA, certificate authority 

Fluff talk: Using certificates from real certificate authorities (CAs) for development can be dangerous or impossible, but self-signed certificates cause trust errors. Managing your own CA is the best solution, but usually involves arcane commands, specialized knowledge, and manual steps. 

Terms 

CA certificate: A CA certificate is a digital certificate issued by a certificate authority (CA), so SSL clients (such as web browsers) can use it to verify the SSL certificates sign by this CA. 

Https content: When requesting https content, the server will send a public key to browser, so that every time, the browser receives data will decrypted with the public key. 

 

Generic Reason: Certificates generated by our own CA can be used by any internal application needing to communicate with SSL. 

Specific Reason: Azure AD login can only be used by a web application that supports SSL. To implement SSL we need some way to generate SSL certificates. 

Why: We have built several web applications and RESTful API to validate the CNC tooling application. These applications use the Azure Graph API functionality to send emails, create one-drive documents, and add tasks to planners. To make use of the MS Graph API the applications must be registered and given permission to Azure resources. This was done last year. For security purposes and to tailor these applications to individual needs it is desirable to ensure a user is logged in before giving them access. 

mkcert automatically creates and installs a local CA in the system root store and generates locally trusted certificates.  

How: Use a program called mkcert to automatically create and install a local CA in the system root store. Then use it to generate a locally trusted certificate for each of the following DNS entries: 

Gm 
gm-api.busche-cnc.com 
prod 
prod-api.busche-cnc.com 
tooling 
tooling-api.busche-cnc.com 
eng 
eng-api.busche-cnc.com 
Point all DNS host entries to 10.1.1.83 for development and 172.20.88.16 for production. 

Mkcert Installation 
Mkcert is a simple tool for making locally trusted development certificates. It requires no configuration. It can be installed on Windows, MacOS, or Linux. 

I followed the process outlined here: https://github.com/FiloSottile/mkcert 
Windows 
choco install mkcert 

Ubuntu 
sudo apt install libnss3-tools 
Then you can install using Homebrew on Linux 
brew install mkcert 
mkcert -install 
The following root CA files were generated: 
/home/brent/.local/share/mkcert/rootCA.pem 
/home/brent/.local/share/mkcert/rootCA-key.pem 
The local CA is now installed in the system trust store! ‚ö°Ô∏è
The local CA is now installed in the Firefox and/or Chrome/Chromium trust store (requires browser restart)! ü¶ä
ls -al /home/brent/.local/share/mkcert

How to use Mkcert to create certificates. 
This was made on reports01 at 10.1.0.116
and the certificates are store in: git@github.com:brentgroves/linux-utils.git /certificates
and that includes the root certificates rootCA.
mkcert mobex.k8s
Created a new certificate valid for the following names üìú
 - "mobex.k8s"
The certificate is at "./mobex.k8s.pem" and the key at "./mobex.k8s-key.pem" ‚úÖ
It will expire on 30 November 2024 üóì

mkcert mobex.us.k8s
Created a new certificate valid for the following names üìú
- "mobex.us.k8s"
The certificate is at "./mobex.us.k8s.pem" and the key at "./mobex.us.k8s-key.pem" ‚úÖ
It will expire on 30 November 2024 üóì
mkcert mobex-dev.k8s
Created a new certificate valid for the following names üìú
- "mobex-dev.k8s"
The certificate is at "./mobex-dev.k8s.pem" and the key at "./mobex-dev.k8s-key.pem" ‚úÖ
It will expire on 30 November 2024 üóì
mkcert mobex-dev.us.k8s
Created a new certificate valid for the following names üìú
- "mobex-dev.us.k8s"
The certificate is at "./mobex-dev.us.k8s.pem" and the key at "./mobex-dev.us.k8s-key.pem" ‚úÖ
It will expire on 30 November 2024 üóì
mkcert tooling.k8s
[2:00 PM] Brent Groves
Created a new certificate valid for the following names üìú
- "tooling.k8s"
The certificate is at "./tooling.k8s.pem" and the key at "./tooling.k8s-key.pem" ‚úÖ
It will expire on 30 November 2024 üóì
mkcert tooling.us.k8s
Created a new certificate valid for the following names üìú
- "tooling.us.k8s"
The certificate is at "./tooling.us.k8s.pem" and the key at "./tooling.us.k8s-key.pem" ‚úÖ
It will expire on 30 November 2024 üóì

This was made on moto,10.1.1.83
mkcert gm 
mkcert gm-api.busche-cnc.com 
mkcert prod 
mkcert prod-api.busche-cnc.com 
mkcert tooling 
mkcert tooling-api.busche-cnc.com 
mkcert eng 
mkcert eng-api.busche-cnc.com 

Not Secure: 
The browsers will always show not secure when accessing these web sites from computers other than the development system unless you add the RootCA.pfx to the trused root certificate store. 
As you will recall MkCert generated the rootCA.pem and rootCA-key.pem files during installation. Since Windows wants this certificate in pfx format it must be converted first. 
    Go to the /home/brent/.local/share/mkcert folder 
    has password,M0b3x@dm!n, then run openssl pkcs12 -inkey rootCA-key.pem -in rootCA.pem -export -out rootCA.pfx 
    no password: then run openssl pkcs12 -inkey rootCA-key.pem -in rootCA.pem -export -out rootCA.pfx -passin pass: -passout pass:

    Then go to the Windows system and do the following:
    open power shell
    cd source/repos 
    git clone https://github.com/brentgroves/linux-utils.git
    cd certificates
    ls RootCA.pfx on desired system.  
    Then go to Administrator: PowerShell and type certmgr.msc. 
    From the Trusted Root Certification Authorities\Cerficates folder right click and select Import from the All Tasks context menu. From the Certificate Import Wizard select Current User or Local Machine store location and click next.   
    Then select the location of the RootCA.pfx file using the Browse button. 
    Press Yes button for the Do you want to install this certificate security warning dialog. 
    If you exit and run certmgr.msc again you should see a new trusted root certificate: mkcert: brent@moto. 
 

Instead of adding the root certificate to every computer you can add use a group policy to distribute it. 
https://docs.microsoft.com/en-us/windows-server/identity/ad-fs/deployment/distribute-certificates-to-client-computers-by-using-group-policy 

This is how you can add digital certificates to Windows 10 from trusted CAs. 

    First, you‚Äôll need to download a root certificate from a CA. For example, you could download one from the GeoTrust site. 

    Next, open Local Security Policy in Windows by pressing the Win key + R hotkey and entering ‚Äòsecpol.msc‚Äô in Run‚Äôs text box. Note that Windows 10 Home edition doesn‚Äôt include the Local Security Policy editor. If your Windows key doesn‚Äôt work, check this quick guide to fix it. 

    Then, click Public Key Policies and Certificate Path Validation Settings to open a Certificate Path Validation Settings Properties window. 

    Click the Stores tab and select the Define these policy settings check box. 

    Select the Allow user trusted root CAs to be used to validate certificates and Allow users to trust peer trust certificates options if they‚Äôre not already selected. 

    You should also select the Third-Party Root CAs and Enterprise Root CAs checkbox and press the Apply > OK buttons to confirm the selected settings. 

    Next, press the Win key + R hotkey and enter ‚Äòcertmgr.msc‚Äô in Run‚Äôs text box to open the window shown in the snapshot directly below. That‚Äôs the Certification Manager which lists your digital certificates.certificates manager 

    Click Trusted Root Certification Authorities and right-click Certificates to open a context menu. 

    Select All Tasks > Import on the context menu to open the window shown below.certificate import wizard 

    Press the Next button, click Browse, and then select the digital certificate root file saved to your HDD. 

    Press Next again to select the Automatically select the certificate store based on the type of certificate option. 

    Then you can press Next > Finish to wrap up the import wizard. A window will open confirming that ‚Äúthe import was successful.‚Äù 

    You should now be able to see the Mobex trusted root certificate it is the one Issued To brent@moto(Brent). 

  

Certificate Types 

Publicly-trusted certificates 

Publicly trusted SSL/TLS certificates are used for public-facing web servers and applications. A publicly-trusted certificate can only be issued by an external, trusted third-party CA (e.g. Entrust, DigiCert, etc.) which verifies the domain owner. 

Privately-trusted certificates 

Privately-trusted SSL/TLS certificates are used to authenticate users and devices on the internal network. A privately-trusted certificate can be issued by either a public CA, or more often, by any organization that runs their own dedicated internal public key infrastructure (e.g. Microsoft CA). 

What is a Self-Signed Certificate? 

Another strategy is to issue self-signed SSL certificates. A self-signed certificate is one that is not signed by a CA at all ‚Äì neither private nor public. In this case, the certificate is signed with its own private key, instead of requesting it from a public or a private CA. 

 
 

 

 

 

 

 
 